# 产品需求文档：All about 个人主页 - V1.2 (Mobile & Analytics)

## 1. 综述 (Overview)

### 1.1 项目背景与核心问题
在 V1.0 建立基础展示、V1.1 扩展工具属性后，V1.2 版本着重于**移动端体验优化**与**数据驱动运营**。随着移动端流量的增加，需要确保在小屏幕上依然保持 Bento Grid 的美学特征。同时，引入 Google Analytics 4 (GA4) 以量化用户行为，为后续迭代提供数据支持。

### 1.2 核心业务流程 / 用户旅程地图
1.  **阶段一：初次访问** - 访客通过 PC 或手机进入，Identity Card 自适应展示。
2.  **阶段二：内容浏览** - 访客浏览作品、数据，移动端通过优化的布局获得舒适阅读体验。
3.  **阶段三：互动与工具** - 使用工具箱、留言板，系统自动记录关键交互事件。
4.  **阶段四：数据反馈** - 管理者通过 GA 后台查看用户偏好（如语言、主题、热门工具）。

### 1.3 Mermaid 图（流程/状态/时序）

#### 1.3.1 用户操作流 (更新版)
```mermaid
flowchart TD
  A[开始：访客进入主页] --> B{设备类型检测}
  B -->|Desktop| C[展示 4列 Bento Grid]
  B -->|Mobile| D[展示 单列流式布局]
  
  D --> D1[Identity Card (Full Width)]
  D --> D2[Weather Card (Full Width)]
  D --> D3{Stats & QR Layout}
  D3 -->|Mobile Optimization| E[双列并排 (1:1 Aspect Ratio)]
  
  C & E --> F[交互行为]
  F --> G[GA4 Event Tracking]
  G -->|Track| H[switch_language]
  G -->|Track| I[download_portfolio]
  G -->|Track| J[copy_email / view_github]
```

## 2. 用户故事详述 (User Stories)

### 阶段三：工具使用 (V1.1 Legacy)

#### **US-04: 常用工具栏 (Tools Dashboard Card)**
*   **价值陈述**: 提供图片压缩、AI 入口等高频小工具。
*   **状态**: 已实现基础框架与部分工具链接。

---

### 阶段四：移动端适配与数据统计 (V1.2 New)

#### **US-05: 移动端体验优化 (Mobile Adaptation)**
*   **价值陈述 (Value Statement)**:
    *   **作为** 移动端访客
    *   **我希望** 页面在手机上能流畅展示，布局紧凑且美观
    *   **以便于** 我在碎片时间通过手机访问和互动
*   **业务规则与逻辑 (Business Logic)**:
    1.  **响应式网格系统**:
        *   **Desktop**: 保持 `grid-cols-[repeat(4,200px)]`。
        *   **Mobile**: 调整为 `grid-cols-1`，卡片垂直堆叠。
    2.  **紧凑布局策略**:
        *   **Stats Card** 与 **QRCode Card** 在移动端强制合并为一行（`grid-cols-2`）。
        *   **宽高比限制**: 强制这两个卡片在移动端保持 **1:1 (Aspect Ratio)**，防止高度塌陷或拉伸，确保视觉平衡。
    3.  **样式微调**:
        *   移动端字体大小适配（如 Stats 数字从 `4xl` 调整为 `3xl`）。
        *   内边距 (Padding) 缩小以节省屏幕空间。

#### **US-06: Google Analytics 4 全埋点 (Data Analytics)**
*   **价值陈述 (Value Statement)**:
    *   **作为** 网站管理者
    *   **我希望** 追踪用户的关键交互行为
    *   **以便于** 了解用户对哪些内容感兴趣（如语言偏好、下载次数）
*   **技术实现 (Implementation)**:
    1.  **环境隔离**:
        *   `Development`: 仅在控制台输出 `[GA Log]`，不发送网络请求，避免污染数据。
        *   `Production`: 正常发送 GA4 事件。
    2.  **核心追踪事件 (Custom Events)**:
        *   `switch_language`: 记录用户切换中英文的频率。
        *   `change_background`: 记录用户喜欢哪种背景氛围。
        *   `download_portfolio`: 记录 Stats 卡片的下载点击。
        *   `copy_email`: 记录联系意向。
        *   `view_github` / `view_wechat`: 记录社交跳转。
        *   `sign_guestbook`: 记录留言板活跃度。

---

*   **页面布局线框图 (Mobile View)**:
    ```text
    +-----------------------+
    | [ Identity Card     ] |
    |      (Full Width)     |
    +-----------------------+
    | [ Weather Card      ] |
    |      (Full Width)     |
    +-----------------------+
    | [Stats]  |  [ QR ]    | <--- 1:1 Square, Side-by-side
    | (1:1)    |  (1:1)     |
    +-----------------------+
    | [ Guestbook Card    ] |
    +-----------------------+
    | [ Works Card        ] |
    +-----------------------+
    | [ Tools Card        ] |
    +-----------------------+
    ```
